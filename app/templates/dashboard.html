
{% extends "base.html" %}

{% block title %}Dashboard - Achievo{% endblock %}

{% block content %}
<div style="margin: 2rem 0;">
    <h1>Ch√†o m·ª´ng, {{ session.user_name }}!</h1>
    
    {% if session.user_type == 'learner' %}
        <div class="dashboard-grid">
            <div class="card">
                <h3>üìö Ti·∫øn tr√¨nh h·ªçc t·∫≠p</h3>
                <div style="background: #e9ecef; height: 20px; border-radius: 10px; margin: 1rem 0;">
                    <div style="background: #28a745; height: 100%; width: {{ progress }}%; border-radius: 10px;"></div>
                </div>
                <p>Ho√†n th√†nh: {{ progress }}%</p>
            </div>
            
            <div class="card">
                <h3>üèÜ Ch·ª©ng ch·ªâ NFT</h3>
                <p>S·ªë ch·ª©ng ch·ªâ ƒë√£ nh·∫≠n: <strong>{{ certificates_count }}</strong></p>
                <a href="{{ url_for('my_certificates') }}" class="btn btn-primary">Xem ch·ª©ng ch·ªâ</a>
            </div>
            
            <div class="card">
                <h3>üéÅ Ph·∫ßn th∆∞·ªüng</h3>
                <p>NFT ph·∫ßn th∆∞·ªüng: <strong>{{ rewards_count }}</strong></p>
                <a href="{{ url_for('my_rewards') }}" class="btn btn-success">Xem ph·∫ßn th∆∞·ªüng</a>
            </div>
            
            <div class="card">
                <h3>üõí Marketplace</h3>
                <p>Kh√°m ph√° c√°c kh√≥a h·ªçc v√† d·ªãch v·ª• m·ªõi</p>
                <a href="{{ url_for('marketplace') }}" class="btn btn-primary">V√†o Marketplace</a>
            </div>
        </div>
        
        <div class="card">
            <h3>üìä Ho·∫°t ƒë·ªông g·∫ßn ƒë√¢y</h3>
            <div id="recent-activities">
                {% for activity in recent_activities %}
                    <div style="padding: 0.5rem 0; border-bottom: 1px solid #eee;">
                        <strong>{{ activity.type }}</strong> - {{ activity.description }}
                        <span style="float: right; color: #666;">{{ activity.created_at.strftime('%d/%m/%Y %H:%M') }}</span>
                    </div>
                {% endfor %}
            </div>
        </div>
        
    {% elif session.user_type == 'educator' %}
        <div class="dashboard-grid">
            <div class="card">
                <h3>üë• H·ªçc vi√™n</h3>
                <p>T·ªïng s·ªë h·ªçc vi√™n: <strong>{{ students_count }}</strong></p>
                <a href="{{ url_for('manage_students') }}" class="btn btn-primary">Qu·∫£n l√Ω h·ªçc vi√™n</a>
            </div>
            
            <div class="card">
                <h3>üìñ Kh√≥a h·ªçc</h3>
                <p>S·ªë kh√≥a h·ªçc: <strong>{{ courses_count }}</strong></p>
                <a href="{{ url_for('manage_courses') }}" class="btn btn-primary">Qu·∫£n l√Ω kh√≥a h·ªçc</a>
            </div>
            
            <div class="card">
                <h3>üéì Ch·ª©ng ch·ªâ ƒë√£ ph√°t h√†nh</h3>
                <p>T·ªïng s·ªë: <strong>{{ issued_certificates }}</strong></p>
                <a href="{{ url_for('issue_certificate') }}" class="btn btn-success">Ph√°t h√†nh ch·ª©ng ch·ªâ</a>
            </div>
            
            <div class="card">
                <h3>üìä B√°o c√°o</h3>
                <p>Xem th·ªëng k√™ v√† b√°o c√°o chi ti·∫øt</p>
                <a href="{{ url_for('reports') }}" class="btn btn-primary">Xem b√°o c√°o</a>
            </div>
        </div>
        
        <div class="card">
            <h3>‚ö° Thao t√°c nhanh</h3>
            <div style="display: flex; gap: 1rem; flex-wrap: wrap;">
                <a href="{{ url_for('issue_certificate') }}" class="btn btn-success">Ph√°t h√†nh ch·ª©ng ch·ªâ m·ªõi</a>
                <a href="{{ url_for('create_course') }}" class="btn btn-primary">T·∫°o kh√≥a h·ªçc</a>
                <a href="{{ url_for('upload_students') }}" class="btn btn-primary">Import h·ªçc vi√™n</a>
            </div>
        </div>
        
    {% elif session.user_type == 'admin' %}
        <div class="dashboard-grid">
            <div class="card">
                <h3>üë§ Ng∆∞·ªùi d√πng</h3>
                <p>T·ªïng s·ªë: <strong>{{ total_users }}</strong></p>
                <a href="{{ url_for('admin_users') }}" class="btn btn-primary">Qu·∫£n l√Ω ng∆∞·ªùi d√πng</a>
            </div>
            
            <div class="card">
                <h3>üè¢ T·ªï ch·ª©c</h3>
                <p>Ch·ªù ph√™ duy·ªát: <strong>{{ pending_organizations }}</strong></p>
                <a href="{{ url_for('admin_organizations') }}" class="btn btn-danger">Ph√™ duy·ªát t·ªï ch·ª©c</a>
            </div>
            
            <div class="card">
                <h3>üéì Ch·ª©ng ch·ªâ</h3>
                <p>T·ªïng s·ªë: <strong>{{ total_certificates }}</strong></p>
                <a href="{{ url_for('admin_certificates') }}" class="btn btn-primary">Qu·∫£n l√Ω ch·ª©ng ch·ªâ</a>
            </div>
            
            <div class="card">
                <h3>üìã Log h·ªá th·ªëng</h3>
                <p>Ki·ªÉm to√°n v√† log ho·∫°t ƒë·ªông</p>
                <a href="{{ url_for('admin_logs') }}" class="btn btn-primary">Xem log</a>
            </div>
        </div>
    {% endif %}
</div>
{% endblock %}
